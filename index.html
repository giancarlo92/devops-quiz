<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cuestionario DevOps - Evaluaci√≥n T√©cnica</title>
    <link rel="stylesheet" href="css/styles.css">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-content">
                <div class="header-text">
                    <h1>üöÄ Cuestionario DevOps</h1>
                    <p>Evaluaci√≥n t√©cnica de conocimientos en tecnolog√≠as DevOps</p>
                </div>
            </div>
            <div class="prompts-button-container">
                <button class="btn btn-secondary" id="promptsBtn" onclick="showPromptsPage()">üß† Prompts</button>
                <button class="btn btn-secondary" id="guidesBtn" onclick="showGuidesPage()">üìò Gu√≠as</button>
                <button class="btn btn-secondary" id="docsBtn" onclick="showDocsPage()">üìÑ Documentaci√≥n</button>
            </div>
        </div>

        <div class="content">
            <!-- Pantalla de inicio -->
            <div id="startScreen" class="start-screen">

                <!-- Selector de n√∫mero de preguntas -->
                <div class="question-count-selector">
                    <h3>Selecciona el n√∫mero de preguntas:</h3>
                    <div class="question-count-options">
                        <label class="question-count-option">
                            <input type="radio" name="questionCount" value="10" onchange="updateQuestionCount(10)">
                            <span>10 preguntas</span>
                        </label>
                        <label class="question-count-option">
                            <input type="radio" name="questionCount" value="20" onchange="updateQuestionCount(20)">
                            <span>20 preguntas</span>
                        </label>
                        <label class="question-count-option selected">
                            <input type="radio" name="questionCount" value="30" onchange="updateQuestionCount(30)" checked>
                            <span>30 preguntas</span>
                        </label>
                        <label class="question-count-option">
                            <input type="radio" name="questionCount" value="40" onchange="updateQuestionCount(40)">
                            <span>40 preguntas</span>
                        </label>
                        <label class="question-count-option">
                            <input type="radio" name="questionCount" value="50" onchange="updateQuestionCount(50)">
                            <span>50 preguntas</span>
                        </label>
                    </div>
                </div>

                <div class="exam-type-selection">
                    <h3>Selecciona el tipo de examen:</h3>
                    <div class="exam-cards">
                        <div class="exam-card" id="guidedCard" onclick="selectExamType('guided')">
                            <div class="exam-icon">üéØ</div>
                            <h4>Modo Guiado</h4>
                            <p>Puedes validar cada respuesta y ver explicaciones durante el examen</p>
                        </div>
                        <div class="exam-card" id="evaluationCard" onclick="selectExamType('evaluation')">
                            <div class="exam-icon">üìù</div>
                            <h4>Modo Evaluaci√≥n</h4>
                            <p>Responde todas las preguntas y ve los resultados al final</p>
                        </div>
                    </div>
                </div>

                <!-- Selector de nivel de dificultad -->
                <div class="level-selection" aria-label="Selecciona nivel" role="group">
                    <h3>Selecciona el nivel (puedes combinar varios):</h3>
                    <div class="level-options">
                        <label class="level-option" aria-pressed="false">
                            <input type="checkbox" class="level-checkbox" value="basico" />
                            <span>B√°sico</span>
                        </label>
                        <label class="level-option" aria-pressed="false">
                            <input type="checkbox" class="level-checkbox" value="intermedio" />
                            <span>Intermedio</span>
                        </label>
                        <label class="level-option" aria-pressed="false">
                            <input type="checkbox" class="level-checkbox" value="avanzado" />
                            <span>Avanzado</span>
                        </label>
                    </div>
                </div>

                <!-- Selecci√≥n de tecnolog√≠as (opcional) - Multi-select con chips -->
                <div class="technology-selection">
                    <h3>Filtra por temas (opcional):</h3>
                    <div id="techMultiSelect" class="multi-select" aria-label="Selector de temas">
                        <div id="techControl" class="multi-select-control" tabindex="0" aria-haspopup="listbox" aria-expanded="false">
                            <div id="chipContainer" class="chip-container"><!-- chips din√°micos --></div>
                            <button type="button" id="clearTechBtn" class="clear-btn" aria-label="Limpiar selecci√≥n">‚úï</button>
                            <button type="button" class="caret-btn" aria-label="Abrir selecci√≥n">‚ñæ</button>
                        </div>
                        <div id="techDropdown" class="multi-select-dropdown" role="listbox" aria-multiselectable="true">
                            <!-- elementos cargados din√°micamente -->
                        </div>
                    </div>
                    <p class="technology-helper">Si no seleccionas nada, se combinar√°n todos los temas.</p>
                </div>

                <div class="instructions">
                    <h3>üìã Instrucciones:</h3>
                    <ul>
                        <li>Lee cada pregunta cuidadosamente</li>
                        <li>Algunas preguntas pueden tener m√∫ltiples respuestas correctas</li>
                        <li id="guidedInstruction" style="display: none;">En modo guiado puedes validar cada respuesta</li>
                        <li id="evaluationInstruction" style="display: none;">En modo evaluaci√≥n ver√°s los resultados al final</li>
                    </ul>
                    <button class="btn btn-primary" id="startQuizBtn" onclick="startQuiz()" disabled>Selecciona un tipo de examen para continuar</button>
                </div>

                <!-- Pantalla de carga -->
                <div id="loading" class="loading">
                    <div class="spinner"></div>
                    <h3>Cargando preguntas...</h3>
                    <p>Seleccionando 30 preguntas aleatorias de todas las tecnolog√≠as</p>
                </div>

            </div>

            <div class="quiz-content">
                <!-- Contenido del cuestionario -->
                <div id="quizContainer" style="display: none;">
                    <div class="quiz-header-controls">
                        <button class="btn btn-secondary" id="summaryBtn" style="display: none;" onclick="showSummary()">Volver al Resumen</button>
                        <button class="btn btn-danger" id="exitExamBtn" onclick="exitExam()">Salir del Examen</button>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>

                    <div id="questionsContainer">
                        <!-- Las preguntas se generar√°n din√°micamente aqu√≠ -->
                    </div>

                    <div class="navigation">
                        <button class="btn btn-secondary" id="prevBtn" onclick="previousQuestion()" disabled>Anterior</button>
                        <span id="questionCounter">Pregunta 1 de 30</span>
                        <button class="btn btn-primary" id="nextBtn" onclick="nextQuestion()">Siguiente</button>
                    </div>
                </div>

                <!-- Pantalla de resumen de respuestas -->
                <div id="summaryScreen" class="summary-screen" style="display: none;">
                    <h2>Resumen de Respuestas</h2>
                    <p>Revisa tus respuestas antes de enviar el cuestionario. Puedes modificar cualquier respuesta haciendo clic en "Modificar".</p>
                    
                    <div id="summaryContainer" class="summary-container">
                        <!-- Las respuestas se generar√°n din√°micamente aqu√≠ -->
                    </div>
                    
                    <div class="summary-actions">
                        <button class="btn btn-secondary" onclick="backToQuiz()">Volver al Cuestionario</button>
                        <button class="btn btn-primary" onclick="submitFinalAnswers()">Enviar Respuestas para Calificaci√≥n</button>
                    </div>
                </div>

                <!-- Pantalla de resultados -->
                <div id="results" class="results" style="display: none;">
                    <h2>¬°Cuestionario Completado!</h2>
                    <div class="score-circle" id="scoreCircle">
                        <span id="scoreText">0/30</span>
                    </div>
                    <h3 id="scoreMessage">¬°Excelente trabajo!</h3>
                    
                    <div class="results-details">
                        <div class="results-grid">
                            <div class="result-item">
                                <h3>Respuestas Correctas</h3>
                                <div class="number" id="correctAnswers">0</div>
                            </div>
                            <div class="result-item">
                                <h3>Respuestas Incorrectas</h3>
                                <div class="number" id="incorrectAnswers">0</div>
                            </div>
                            <div class="result-item">
                                <h3>Porcentaje</h3>
                                <div class="number" id="percentage">0%</div>
                            </div>
                            <div class="result-item">
                                <h3>Calificaci√≥n</h3>
                                <div class="number" id="grade">F</div>
                            </div>
                        </div>
                        <button class="btn btn-primary" onclick="restartQuiz()">Nuevo Cuestionario</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- P√°gina de Prompts -->
    <div id="promptsPage" class="prompts-page" style="display: none;">
        <div class="prompts-header">
            <div class="prompts-header-content">
                <div class="prompts-title">
                    <h1>üß† Prompts de Aprendizaje DevOps</h1>
                    <p>Recursos completos para dominar las tecnolog√≠as DevOps</p>
                </div>
                <div class="prompts-actions">
                    <button class="btn btn-secondary" onclick="backToQuiz()">‚Üê Volver al Cuestionario</button>
                </div>
            </div>
        </div>
        
        <div class="prompts-content">
            <div class="prompts-gallery" id="promptsGallery">
                <!-- Los prompts se cargar√°n din√°micamente aqu√≠ -->
            </div>
        </div>
        
        <!-- Modal para mostrar el contenido del prompt -->
        <div id="promptModal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="modalTitle"></h2>
                    <div class="modal-actions">
                        <button class="btn btn-secondary" id="copyMarkdownBtn" onclick="copyMarkdownContent()">üìã Copiar MD</button>
                        <button class="btn btn-danger" onclick="closeModal()">‚úï Cerrar</button>
                    </div>
                </div>
                <div class="modal-body">
                    <div id="markdownContent" class="markdown-content"></div>
                </div>
            </div>
            <!-- Botones de navegaci√≥n (Prompts) -->
            <button class="modal-nav-btn modal-nav-left" aria-label="Anterior" onclick="navigatePrompt(-1)">‚ùÆ</button>
            <button class="modal-nav-btn modal-nav-right" aria-label="Siguiente" onclick="navigatePrompt(1)">‚ùØ</button>
        </div>
    </div>

    <!-- P√°gina de Gu√≠as -->
    <div id="guidesPage" class="prompts-page" style="display: none;">
        <div class="prompts-header">
            <div class="prompts-header-content">
                <div class="prompts-title">
                    <h1>üìò Gu√≠as R√°pidas DevOps</h1>
                    <p>Referencia breve para usar tecnolog√≠as de forma efectiva</p>
                </div>
                <div class="prompts-actions">
                    <button class="btn btn-secondary" onclick="backToQuiz()">‚Üê Volver al Cuestionario</button>
                </div>
            </div>
        </div>
        
        <div class="prompts-content">
            <div class="prompts-gallery" id="guidesGallery">
                <!-- Las gu√≠as se cargar√°n din√°micamente aqu√≠ -->
            </div>
        </div>
        
        <!-- Modal para mostrar el contenido de la gu√≠a -->
        <div id="guideModal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="guideModalTitle"></h2>
                    <div class="modal-actions">
                        <button class="btn btn-secondary" id="copyGuideMarkdownBtn" onclick="copyGuideMarkdownContent()">üìã Copiar MD</button>
                        <button class="btn btn-danger" onclick="closeGuideModal()">‚úï Cerrar</button>
                    </div>
                </div>
                <div class="modal-body">
                    <div id="guideMarkdownContent" class="markdown-content"></div>
                </div>
            </div>
            <!-- Botones de navegaci√≥n (Gu√≠as) -->
            <button class="modal-nav-btn modal-nav-left" aria-label="Anterior" onclick="navigateGuide(-1)">‚ùÆ</button>
            <button class="modal-nav-btn modal-nav-right" aria-label="Siguiente" onclick="navigateGuide(1)">‚ùØ</button>
        </div>
    </div>

    <!-- P√°gina de Documentaci√≥n -->
    <div id="docsPage" class="prompts-page" style="display: none;">
        <div class="prompts-header">
            <div class="prompts-header-content">
                <div class="prompts-title">
                    <h1>üìÑ Documentaci√≥n DevOps</h1>
                    <p>Visualiza y navega documentos PDF relacionados</p>
                </div>
                <div class="prompts-actions">
                    <button class="btn btn-secondary" onclick="backToQuiz()">‚Üê Volver al Cuestionario</button>
                </div>
            </div>
        </div>

        <div class="prompts-content">
            <div class="prompts-gallery" id="docsGallery">
                <!-- Los documentos se cargar√°n din√°micamente aqu√≠ -->
            </div>
        </div>

        <!-- Modal para visualizar PDF -->
        <div id="docModal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="docModalTitle"></h2>
                    <div class="modal-actions">
                        <button class="btn btn-secondary" id="openDocNewTabBtn">üîó Abrir en nueva pesta√±a</button>
                        <button class="btn btn-danger" onclick="closeDocModal()">‚úï Cerrar</button>
                    </div>
                </div>
                <div class="modal-body">
                    <div id="pdfViewerContainer" class="pdf-viewer-container">
                        <iframe id="pdfFrame" src="" title="Visor PDF" class="pdf-frame"></iframe>
                    </div>
                </div>
            </div>
            <!-- Botones de navegaci√≥n (Documentaci√≥n) -->
            <button class="modal-nav-btn modal-nav-left" aria-label="Anterior" onclick="navigateDocument(-1)">‚ùÆ</button>
            <button class="modal-nav-btn modal-nav-right" aria-label="Siguiente" onclick="navigateDocument(1)">‚ùØ</button>
        </div>
    </div>

    <!-- Plantillas HTML -->
    <template id="question-template">
        <div class="question-container">
            <div class="question-header">
                <div class="question-number"></div>
                <div class="question-tech"></div>
                <div class="question-level"></div>
            </div>
            <div class="question-text"></div>
            <div class="options-container"></div>
            <div class="validate-section">
                <button class="validate-btn">üîç Validar Respuesta</button>
            </div>
            <div class="explanation-section" style="display: none;">
                <div class="explanation-header">
                    <h4>üí° Explicaci√≥n:</h4>
                    <button class="tts-toggle" type="button" title="Escuchar/Pausar" aria-label="Escuchar/Pausar explicaci√≥n" aria-pressed="false">üîä</button>
                </div>
                <p class="explanation-text" aria-live="polite"></p>
            </div>
        </div>
    </template>

    <template id="option-template">
        <div class="option">
            <input type="checkbox">
            <label></label>
        </div>
    </template>

    <script src="js/script.js?v=docs-modal-1"></script>
</body>
</html>